@model Inventory.ViewModel.Branchs.BranchViewModel

@{
    ViewData["Title"] = "Details";
}
@await Html.PartialAsync("_Alerts")


<h2>Branch Details</h2>
<hr />

<dl class="row">
    <dt class="col-sm-3">Branch Name</dt>
    <dd class="col-sm-9">@Model.BranchName</dd>

    <dt class="col-sm-3">Description</dt>
    <dd class="col-sm-9">@Model.Description</dd>

    <dt class="col-sm-3">Currency</dt>
    <dd class="col-sm-9">@Model.Currency</dd>

    <dt class="col-sm-3">Address</dt>
    <dd class="col-sm-9">@Model.Address</dd>

    <dt class="col-sm-3">City</dt>
    <dd class="col-sm-9">@Model.City</dd>

    <dt class="col-sm-3">State</dt>
    <dd class="col-sm-9">@Model.State</dd>


    <dt class="col-sm-3">Zip Code</dt>
    <dd class="col-sm-9">@Model.ZipCode</dd>

    <dt class="col-sm-3">phone</dt>
    <dd class="col-sm-9">@Model.phone</dd>

    <dt class="col-sm-3">Email</dt>
    <dd class="col-sm-9">@Model.Email</dd>

    <dt class="col-sm-3">Contact Person</dt>
    <dd class="col-sm-9">@Model.ContactPerson</dd>
    <h4>Warehouses</h4>

    @if (Model.Warehouses != null && Model.Warehouses.Any())
    {
        <ul class="list-group">
            @foreach (var product in Model.Warehouses)
            {
                <li class="list-group-item">
                    <a asp-controller="Warehouse"
                       asp-action="Details"
                       asp-route-id="@product.warehouseId">
                        @product.warehouseName
                    </a>
                </li>
            }
        </ul>
    }
    else
    {
        <p class="text-muted">No Warehouses found for this branch.</p>
    }

</dl>

<hr />

<div class="mt-3">
    <a asp-action="Edit" asp-route-id="@Model.BranchId" class="btn btn-primary">Edit</a>

    <!-- Delete button opens modal -->
    <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal">
        Delete
    </button>

    <a asp-action="Index" class="btn btn-secondary">Back to List</a>
</div>


<!-- DELETE CONFIRMATION MODAL -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteModalLabel">Confirm Delete</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">
                Are you sure you want to delete the branch:
                <strong>@Model.BranchName</strong> ?
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>

                <form method="post" asp-action="Delete" asp-route-id="@Model.BranchId">
                    <input type="submit" value="Delete" class="btn btn-danger" />
                </form>
            </div>
        </div>
    </div>
</div>
